OpenWeather Task
================
| Simple CRUDL API for interacting with users and their items.
| User credentials/tokens stored and transferred unencrypted for the sake of simplicity.

API
----------
API spec is available on ``/docs`` and ``/redoc`` routes, generated by ``FastAPI``.

Running
-------
Run app, ``docker-compose`` required: ::

    make run

Run migrations: ::

    make migrate

Access API spec at http://0.0.0.0:8000/docs

Installation
------------
For development purpose only.
Requirements: ``poetry``, ``docker``.

Setup environment: ::

    make install

In case you'll have problems with ``psycopg2`` dependency on MacOS: ::

    env LDFLAGS="-I/usr/local/opt/openssl/include -L/usr/local/opt/openssl/lib" make install

Run  ``postgres``: ::

    docker run --rm -p 5432:5432 --name dev-postgres -e POSTGRES_PASSWORD=postgres -d postgres

Set ``DATABASE_URI``: ::

    export DATABASE_URI=postgresql://postgres:postgres@localhost:5432/postgres

Run migrations ::

    poetry run alembic upgrade head

Run app: ::

    poetry run uvicorn --host=0.0.0.0 openweather_task.main:app --reload

